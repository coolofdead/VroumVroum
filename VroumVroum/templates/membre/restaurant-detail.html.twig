{# TODO : faire un popup bootstrap quand on essaye d'ajouter un plat d'un autre restaurant #}

{% extends 'base.html.twig' %}
{% block title %}{{ restaurant.nom }}{% endblock %}

{% block content %}
        {{ parent() }}

        {% set categories = [] %}

        {% for plat in restaurant.plats|sort((a, b) => a.categorie.categorie <=> b.categorie.categorie) %}
                {% if plat.categorie.categorie not in categories %}
                        {% set categories = categories|merge([plat.categorie.categorie]) %}
                {% endif %}
               
        {% endfor %}

        {% set iconsCategory = [
                'ğŸ§€','ğŸ–','ğŸ—','ğŸ¥©','ğŸ¥“','ğŸ”','ğŸŸ','ğŸ•','ğŸŒ­','ğŸ¥ª','ğŸŒ®','ğŸŒ¯','ğŸ¥™','ğŸ§†','ğŸ³','ğŸ¥˜','ğŸ²','ğŸ¥£','ğŸ¥—','ğŸ¿','ğŸ§ˆ','ğŸ§‚','ğŸ¥«','ğŸ±','ğŸ˜','ğŸ™','ğŸš','ğŸ›','ğŸœ','ğŸ','ğŸ ','ğŸ¢','ğŸ£','ğŸ¤','ğŸ¥','ğŸ¥®','ğŸ¡','ğŸ¥Ÿ','ğŸ¥ ','ğŸ¥¡','ğŸ¦ª','ğŸ¦','ğŸ§','ğŸ¨','ğŸ©','ğŸª','ğŸ‚','ğŸ°','ğŸ§','ğŸ¥§','ğŸ«','ğŸ¬','ğŸ­','ğŸ®','ğŸ¯','ğŸ¼','ğŸ¥›','â˜•','ğŸµ','ğŸ¶','ğŸ¾','ğŸ·'
        ] %}

        <div class="navbar navbar-expand-lg navbar-light bg-light" style="display: flex;justify-content: space-between; background-color: #a7f2a7!important;">
                <span>
                        <h1 style="font-weight: bold;">{{ restaurant.nom }}</h1>
                        <p style="font-size: 2em;">{{ restaurant.categorie.categorie }} {{ random(iconsCategory) }}</p>
                </span>
                <div>
                        <img src="{{ restaurant.url }}" class="card-img" alt="..." style="width: 200px;height: 200px;">
                        
                        <p style="text-align: right;color: gray;font-size: 1.5em;">{{ restaurant.adresse }}</p>
                </div>
        </div>

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="navbar-nav">
                        {% for category in categories %}
                                <a class="nav-item nav-link active" href="#{{ category }}" style="text-transform: uppercase">{{ category }}</a>
                        {% endfor %}
                </div>
                </div>
        </nav>

        <div class="container">
                {% for c in categories %}
                        <h2 id="{{ c }}" style="margin-bottom: 1em; margin-top: 4em;">{{ c }} {{ 'ğŸ’²ğŸ’²ğŸ’²ğŸ’²'[0:random(1, 3)]}}</h2>

                        <div class="row row-cols-2">
                        {% for plat in restaurant.plats %}
                                <div class="col" item-data='{"id_resto":"{{restaurant.id}}", "id_plat":"{{plat.id}}", "name":"{{plat.nom}}", "https":"{{random(iconsCategory)}}", "price":"{{plat.prix}}"}'>
                                        <div class="card mb-3" style="max-width: 540px;">
                                                <div class="row no-gutters">
                                                        <div class="col-md-4">
                                                                <img src="https://i.picsum.photos/id/645/200/200.jpg" class="card-img" alt="...">
                                                                </div>
                                                                <div class="col-md-8">
                                                                <div class="card-body">
                                                                        <h4 class="card-title">{{ plat.nom }}</h4>
                                                                        <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional.</p>
                                                                        <p class="card-text" style="color: grey;">{{ plat.prix }}â‚¬</p>
                                                                </div>
                                                        </div>
                                                </div>
                                        </div>
                                </div>
                        {% endfor %}

                        </div>

                {% endfor %}
        </div>

{% endblock %}
